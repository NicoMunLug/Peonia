<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Para ti üíê</title>
<style>
body {
    margin: 0;
    background: #FFFDF5;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: Georgia, serif;
}
canvas {
    background: #FFFDF5;
}
</style>
</head>
<body>

<canvas id="canvas" width="600" height="800"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

// ================== COLORES (IGUALES) ==================
const pinks = ["#FFD1DC", "#FFB6C1", "#FF69B4", "#FF99AA", "#FFE4E1"];
const purples = ["#DDA0DD", "#EE82EE", "#BA55D3"];
const greens = ["#2E8B57", "#228B22"];

// ================== TEXTO ==================
const textTop =
"Te quiero mi ni√±a,\n" +
"espero que estas flores te hagan recordar\n" +
"siempre lo mucho que vales.";

const textBottom =
"Estas nunca dejar√°n de existir,\n" +
"y siempre que te sientas mal\n" +
"vas a poder venir aqu√≠ a verlas\n" +
"y recordar lo hermosa que eres,\n\n" +
"as√≠ como lo son estas peon√≠as üíê";

// ================== UTIL ==================
function rand(min, max) {
    return Math.random() * (max - min) + min;
}
function pick(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
}

// ================== TEXTO TYPEWRITER ==================
function typeText(text, x, y, size, callback) {
    ctx.fillStyle = "#7A4E8A";
    ctx.font = `italic ${size}px Georgia`;
    ctx.textAlign = "center";

    const lines = text.split("\n");
    let line = 0, char = 0;

    function draw() {
        if (line >= lines.length) {
            callback && callback();
            return;
        }

        ctx.clearRect(0, y - 40, canvas.width, 200);

        for (let i = 0; i < line; i++) {
            ctx.fillText(lines[i], x, y + i * (size + 6));
        }

        ctx.fillText(lines[line].slice(0, char), x, y + line * (size + 6));
        char++;

        if (char > lines[line].length) {
            char = 0;
            line++;
        }

        setTimeout(draw, 40);
    }
    draw();
}

// ================== PETALOS (MISMA L√ìGICA PYTHON) ==================
function drawPetal(x, y, r, color) {
    ctx.save();
    ctx.translate(x, y);
    ctx.rotate(rand(0, Math.PI * 2));
    ctx.beginPath();
    ctx.ellipse(0, 0, r * rand(1.0, 1.3), r * rand(0.7, 1.1), 0, 0, Math.PI * 2);
    ctx.fillStyle = color;
    ctx.globalAlpha = 0.7;
    ctx.fill();
    ctx.restore();
}

// ================== RAMO (MISMA COMPOSICI√ìN) ==================
const flowerCenters = [
    [300, 350, 60],
    [220, 310, 50], [380, 320, 55],
    [200, 350, 45], [400, 360, 48],
    [340, 380, 47], [260, 390, 43],
    [260, 420, 52], [340, 430, 50],
    [300, 470, 40]
];

let petals = [];
flowerCenters.forEach(([cx, cy, size]) => {
    for (let i = 0; i < 110; i++) {
        const angle = rand(0, Math.PI * 2);
        const dist = rand(0, size * 0.5);
        petals.push({
            x: cx + Math.cos(angle) * dist,
            y: cy + Math.sin(angle) * dist,
            r: size * rand(0.3, 1),
            c: pick(pinks.concat(purples))
        });
    }
});

let index = 0;

function animateFlowers() {
    if (index >= petals.length) {
        drawStems();
        typeText(textBottom, 300, 640, 20);
        return;
    }
    const p = petals[index++];
    drawPetal(p.x, p.y, p.r, p.c);
    setTimeout(animateFlowers, 20);
}

// ================== TALLOS ==================
function drawStems() {
    ctx.strokeStyle = pick(greens);
    ctx.lineWidth = 6;

    ctx.beginPath();
    ctx.moveTo(300, 420);
    ctx.lineTo(300, 700);
    ctx.stroke();
}

// ================== INICIO ==================
typeText(textTop, 300, 110, 22, () => {
    setTimeout(animateFlowers, 500);
});
</script>

</body>
</html>
